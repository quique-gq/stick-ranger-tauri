"use strict";var t=require("./tauri-3328260d.js"),e=require("./tauri-bd12061b.js");function n(n,r,i,o){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(s){return"object"==typeof o&&Object.freeze(o),[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"execute",program:n,sidecar:r,onEventFn:t.transformCallback(i),args:"string"==typeof o?[o]:o}})]}))}))}var r=function(){function t(){this.eventListeners=Object.create(null)}return t.prototype.addEventListener=function(t,e){t in this.eventListeners?this.eventListeners[t].push(e):this.eventListeners[t]=[e]},t.prototype._emit=function(t,e){if(t in this.eventListeners)for(var n=0,r=this.eventListeners[t];n<r.length;n++){(0,r[n])(e)}},t.prototype.on=function(t,e){return this.addEventListener(t,e),this},t}(),i=function(){function n(t){this.pid=t}return n.prototype.write=function(n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"stdinWrite",pid:this.pid,buffer:n}})]}))}))},n.prototype.kill=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"killChild",pid:this.pid}})]}))}))},n}(),o=function(e){function o(t,n){void 0===n&&(n=[]);var i=e.call(this)||this;return i.sidecar=!1,i.stdout=new r,i.stderr=new r,i.pid=null,i.program=t,i.args="string"==typeof n?[n]:n,i}return t.__extends(o,e),o.sidecar=function(t,e){void 0===e&&(e=[]);var n=new o(t,e);return n.sidecar=!0,n},o.prototype.spawn=function(){return t.__awaiter(this,void 0,void 0,(function(){var e=this;return t.__generator(this,(function(t){return[2,n(this.program,this.sidecar,(function(t){switch(t.event){case"Error":e._emit("error",t.payload);break;case"Terminated":e._emit("close",t.payload);break;case"Stdout":e.stdout._emit("data",t.payload);break;case"Stderr":e.stderr._emit("data",t.payload)}}),this.args).then((function(t){return new i(t)}))]}))}))},o.prototype.execute=function(){return t.__awaiter(this,void 0,void 0,(function(){var e=this;return t.__generator(this,(function(t){return[2,new Promise((function(t,n){e.on("error",n);var r=[],i=[];e.stdout.on("data",(function(t){r.push(t)})),e.stderr.on("data",(function(t){i.push(t)})),e.on("close",(function(e){t({code:e.code,signal:e.signal,stdout:r.join("\n"),stderr:i.join("\n")})})),e.spawn().catch(n)}))]}))}))},o}(r);function s(n,r){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,e.invokeTauriCommand({__tauriModule:"Shell",message:{cmd:"open",path:n,with:r}})]}))}))}var a=Object.freeze({__proto__:null,Command:o,Child:i,open:s});exports.Child=i,exports.Command=o,exports.open=s,exports.shell=a;
