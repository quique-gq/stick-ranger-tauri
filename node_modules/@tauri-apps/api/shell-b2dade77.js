import{_ as t,a as e,d as n,t as r}from"./tauri-ac52b223.js";import{i}from"./tauri-fd6a4996.js";function o(n,o,s,u){return t(this,void 0,void 0,(function(){return e(this,(function(t){return"object"==typeof u&&Object.freeze(u),[2,i({__tauriModule:"Shell",message:{cmd:"execute",program:n,sidecar:o,onEventFn:r(s),args:"string"==typeof u?[u]:u}})]}))}))}var s=function(){function t(){this.eventListeners=Object.create(null)}return t.prototype.addEventListener=function(t,e){t in this.eventListeners?this.eventListeners[t].push(e):this.eventListeners[t]=[e]},t.prototype._emit=function(t,e){if(t in this.eventListeners)for(var n=0,r=this.eventListeners[t];n<r.length;n++){(0,r[n])(e)}},t.prototype.on=function(t,e){return this.addEventListener(t,e),this},t}(),u=function(){function n(t){this.pid=t}return n.prototype.write=function(n){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,i({__tauriModule:"Shell",message:{cmd:"stdinWrite",pid:this.pid,buffer:n}})]}))}))},n.prototype.kill=function(){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,i({__tauriModule:"Shell",message:{cmd:"killChild",pid:this.pid}})]}))}))},n}(),a=function(r){function i(t,e){void 0===e&&(e=[]);var n=r.call(this)||this;return n.sidecar=!1,n.stdout=new s,n.stderr=new s,n.pid=null,n.program=t,n.args="string"==typeof e?[e]:e,n}return n(i,r),i.sidecar=function(t,e){void 0===e&&(e=[]);var n=new i(t,e);return n.sidecar=!0,n},i.prototype.spawn=function(){return t(this,void 0,void 0,(function(){var t=this;return e(this,(function(e){return[2,o(this.program,this.sidecar,(function(e){switch(e.event){case"Error":t._emit("error",e.payload);break;case"Terminated":t._emit("close",e.payload);break;case"Stdout":t.stdout._emit("data",e.payload);break;case"Stderr":t.stderr._emit("data",e.payload)}}),this.args).then((function(t){return new u(t)}))]}))}))},i.prototype.execute=function(){return t(this,void 0,void 0,(function(){var t=this;return e(this,(function(e){return[2,new Promise((function(e,n){t.on("error",n);var r=[],i=[];t.stdout.on("data",(function(t){r.push(t)})),t.stderr.on("data",(function(t){i.push(t)})),t.on("close",(function(t){e({code:t.code,signal:t.signal,stdout:r.join("\n"),stderr:i.join("\n")})})),t.spawn().catch(n)}))]}))}))},i}(s);function d(n,r){return t(this,void 0,void 0,(function(){return e(this,(function(t){return[2,i({__tauriModule:"Shell",message:{cmd:"open",path:n,with:r}})]}))}))}var c=Object.freeze({__proto__:null,Command:a,Child:u,open:d});export{a as C,u as a,d as o,c as s};
