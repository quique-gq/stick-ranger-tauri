{"version":3,"sources":["webpack://tauri/webpack/universalModuleDefinition","webpack://tauri/./src/api/dependency-manager/cargo-crates.ts","webpack://tauri/./src/api/dependency-manager/index.ts","webpack://tauri/./src/api/dependency-manager/npm-packages.ts","webpack://tauri/./src/api/dependency-manager/rust.ts","webpack://tauri/./src/api/dependency-manager/types.ts","webpack://tauri/./src/api/dependency-manager/util.ts","webpack://tauri/./src/helpers/app-paths.ts","webpack://tauri/./src/helpers/get-script-version.ts","webpack://tauri/./src/helpers/logger.ts","webpack://tauri/./src/helpers/spawn.ts","webpack://tauri/external \"@tauri-apps/toml\"","webpack://tauri/external \"chalk\"","webpack://tauri/external \"cross-spawn\"","webpack://tauri/external \"fs\"","webpack://tauri/external \"https\"","webpack://tauri/external \"inquirer\"","webpack://tauri/external \"ms\"","webpack://tauri/external \"os\"","webpack://tauri/external \"path\"","webpack://tauri/external \"semver\"","webpack://tauri/webpack/bootstrap","webpack://tauri/webpack/startup"],"names":["root","factory","exports","module","define","amd","this","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__spreadArray","to","from","i","il","j","__importDefault","mod","__esModule","Object","defineProperty","update","install","spawn_1","types_1","util_1","logger_1","app_paths_1","fs_1","toml_1","inquirer_1","log","default","dependencies","readToml","tomlPath","existsSync","manifest","readFileSync","toString","parse","dependencyDefinition","version","substring","lastIndexOf","manageDependencies","managementType","installedDeps","updatedDeps","lockPath","lock","_loop_1","_i","dependencies_1","dependency","_a","Map","tauri","spawnSync","tauriDir","lockPackages","manifestDep","currentVersion","latestVersion","_b","package","filter","pkg","name","undefined","getCrateLatestVersion","ManagementType","Update","console","semverLt","prompt","type","message","answer","writeFileSync","stringify","reduce","initialValue","dep","set","Install","__createBinding","create","o","m","k","k2","enumerable","get","__setModuleDefault","__importStar","prototype","hasOwnProperty","rust","cargoCrates","npmPackages","installDependencies","updateDependencies","installTheseDev","installThese","cross_spawn_1","npmChild","yarnChild","packageManager","_c","sync","status","error","Error","app","getNpmPackageVersion","InstallDev","useYarn","installNpmPackage","installNpmDevPackage","getNpmLatestVersion","updateNpmPackage","get_script_version_1","path_1","os_1","platform","__dirname","process","cwd","padVersion","semver_1","env","npm_execpath","includes","count","match","crateName","child","output","String","matches","RegExp","exec","packageName","appDir","packageJson","JSON","data","replace","first","second","lt","chalk_1","warn","red","resolvePath","basePath","dir","isAbsolute","endsWith","sep","join","normalize","exit","getAppDir","resolveDir","command","args","err","prevTime","ms_1","banner","color","green","msg","curr","Date","diff","spawn","cmd","params","onClose","runner","stdio","on","code","pid","onFail","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__"],"mappings":"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","file":"api/dependency-manager.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tauri\"] = factory();\n\telse\n\t\troot[\"tauri\"] = factory();\n})(this, function() {\nreturn ","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.update = exports.install = void 0;\nvar spawn_1 = require(\"./../../helpers/spawn\");\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\nvar app_paths_1 = require(\"../../helpers/app-paths\");\nvar fs_1 = require(\"fs\");\nvar toml_1 = __importDefault(require(\"@tauri-apps/toml\"));\nvar inquirer_1 = __importDefault(require(\"inquirer\"));\nvar log = logger_1.default('dependency:crates');\nvar dependencies = ['tauri'];\nfunction readToml(tomlPath) {\n    if (fs_1.existsSync(tomlPath)) {\n        var manifest = fs_1.readFileSync(tomlPath).toString();\n        return toml_1.default.parse(manifest);\n    }\n    return null;\n}\nfunction dependencyDefinition(version) {\n    return { version: version.substring(0, version.lastIndexOf('.')) };\n}\nfunction manageDependencies(managementType) {\n    return __awaiter(this, void 0, void 0, function () {\n        var installedDeps, updatedDeps, result, manifest, lockPath, lock, _loop_1, _i, dependencies_1, dependency;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    installedDeps = [];\n                    updatedDeps = [];\n                    result = new Map();\n                    manifest = readToml(app_paths_1.resolve.tauri('Cargo.toml'));\n                    if (manifest === null) {\n                        log('Cargo.toml not found. Skipping crates check...');\n                        return [2 /*return*/, result];\n                    }\n                    lockPath = app_paths_1.resolve.tauri('Cargo.lock');\n                    if (!fs_1.existsSync(lockPath)) {\n                        spawn_1.spawnSync('cargo', ['generate-lockfile'], app_paths_1.tauriDir);\n                    }\n                    lock = readToml(lockPath);\n                    _loop_1 = function (dependency) {\n                        var lockPackages, manifestDep, currentVersion, latestVersion, latestVersion, inquired;\n                        return __generator(this, function (_b) {\n                            switch (_b.label) {\n                                case 0:\n                                    lockPackages = lock\n                                        ? lock.package.filter(function (pkg) { return pkg.name === dependency; })\n                                        : [];\n                                    manifestDep = manifest.dependencies[dependency];\n                                    currentVersion = lockPackages.length === 1\n                                        ? lockPackages[0].version\n                                        : typeof manifestDep === 'string'\n                                            ? manifestDep\n                                            : manifestDep === null || manifestDep === void 0 ? void 0 : manifestDep.version;\n                                    if (!(currentVersion === undefined)) return [3 /*break*/, 1];\n                                    log(\"Installing \" + dependency + \"...\");\n                                    latestVersion = util_1.getCrateLatestVersion(dependency);\n                                    if (latestVersion !== null) {\n                                        // eslint-disable-next-line security/detect-object-injection\n                                        manifest.dependencies[dependency] = dependencyDefinition(latestVersion);\n                                    }\n                                    installedDeps.push(dependency);\n                                    return [3 /*break*/, 6];\n                                case 1:\n                                    if (!(managementType === types_1.ManagementType.Update)) return [3 /*break*/, 5];\n                                    latestVersion = util_1.getCrateLatestVersion(dependency);\n                                    console.log(dependency, currentVersion, latestVersion);\n                                    if (!(latestVersion !== null && util_1.semverLt(currentVersion, latestVersion))) return [3 /*break*/, 3];\n                                    return [4 /*yield*/, inquirer_1.default.prompt([\n                                            {\n                                                type: 'confirm',\n                                                name: 'answer',\n                                                message: \"[CRATES] \\\"\" + dependency + \"\\\" latest version is \" + latestVersion + \". Do you want to update?\",\n                                                default: false\n                                            }\n                                        ])];\n                                case 2:\n                                    inquired = (_b.sent());\n                                    if (inquired.answer) {\n                                        log(\"Updating \" + dependency + \"...\");\n                                        // eslint-disable-next-line security/detect-object-injection\n                                        manifest.dependencies[dependency] = dependencyDefinition(latestVersion);\n                                        updatedDeps.push(dependency);\n                                    }\n                                    return [3 /*break*/, 4];\n                                case 3:\n                                    log(\"\\\"\" + dependency + \"\\\" is up to date\");\n                                    _b.label = 4;\n                                case 4: return [3 /*break*/, 6];\n                                case 5:\n                                    log(\"\\\"\" + dependency + \"\\\" is already installed\");\n                                    _b.label = 6;\n                                case 6: return [2 /*return*/];\n                            }\n                        });\n                    };\n                    _i = 0, dependencies_1 = dependencies;\n                    _a.label = 1;\n                case 1:\n                    if (!(_i < dependencies_1.length)) return [3 /*break*/, 4];\n                    dependency = dependencies_1[_i];\n                    return [5 /*yield**/, _loop_1(dependency)];\n                case 2:\n                    _a.sent();\n                    _a.label = 3;\n                case 3:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 4:\n                    if (installedDeps.length || updatedDeps.length) {\n                        fs_1.writeFileSync(app_paths_1.resolve.tauri('Cargo.toml'), toml_1.default.stringify(manifest));\n                    }\n                    if (updatedDeps.length) {\n                        if (!fs_1.existsSync(app_paths_1.resolve.tauri('Cargo.lock'))) {\n                            spawn_1.spawnSync('cargo', ['generate-lockfile'], app_paths_1.tauriDir);\n                        }\n                        spawn_1.spawnSync('cargo', __spreadArray([\n                            'update',\n                            '--aggressive'\n                        ], updatedDeps.reduce(function (initialValue, dep) { return __spreadArray(__spreadArray([], initialValue), ['-p', dep]); }, [])), app_paths_1.tauriDir);\n                    }\n                    result.set(types_1.ManagementType.Install, installedDeps);\n                    result.set(types_1.ManagementType.Update, updatedDeps);\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nfunction install() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.install = install;\nfunction update() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Update)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.update = update;\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\nvar rust = __importStar(require(\"./rust\"));\nvar cargoCrates = __importStar(require(\"./cargo-crates\"));\nvar npmPackages = __importStar(require(\"./npm-packages\"));\nvar log = logger_1.default('dependency:manager');\nmodule.exports = {\n    installDependencies: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        log('Installing missing dependencies...');\n                        rust.install();\n                        return [4 /*yield*/, cargoCrates.install()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, npmPackages.install()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    },\n    updateDependencies: function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        log('Updating dependencies...');\n                        rust.update();\n                        return [4 /*yield*/, cargoCrates.update()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, npmPackages.update()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    }\n};\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.update = exports.installTheseDev = exports.installThese = exports.install = void 0;\nvar types_1 = require(\"./types\");\nvar util_1 = require(\"./util\");\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\nvar app_paths_1 = require(\"../../helpers/app-paths\");\nvar inquirer_1 = __importDefault(require(\"inquirer\"));\nvar fs_1 = require(\"fs\");\nvar cross_spawn_1 = require(\"cross-spawn\");\nvar log = logger_1.default('dependency:npm-packages');\nfunction manageDependencies(managementType, dependencies) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function () {\n        var installedDeps, updatedDeps, npmChild, yarnChild, _i, dependencies_1, dependency, currentVersion, packageManager, inquired, latestVersion, inquired, result;\n        return __generator(this, function (_c) {\n            switch (_c.label) {\n                case 0:\n                    installedDeps = [];\n                    updatedDeps = [];\n                    npmChild = cross_spawn_1.sync('npm', ['--version']);\n                    yarnChild = cross_spawn_1.sync('yarn', ['--version']);\n                    if (((_a = npmChild.status) !== null && _a !== void 0 ? _a : npmChild.error) &&\n                        ((_b = yarnChild.status) !== null && _b !== void 0 ? _b : yarnChild.error)) {\n                        throw new Error('must have `npm` or `yarn` installed to manage dependenices');\n                    }\n                    if (!fs_1.existsSync(app_paths_1.resolve.app('package.json'))) return [3 /*break*/, 10];\n                    _i = 0, dependencies_1 = dependencies;\n                    _c.label = 1;\n                case 1:\n                    if (!(_i < dependencies_1.length)) return [3 /*break*/, 10];\n                    dependency = dependencies_1[_i];\n                    currentVersion = util_1.getNpmPackageVersion(dependency);\n                    if (!(currentVersion === null)) return [3 /*break*/, 4];\n                    log(\"Installing \" + dependency + \"...\");\n                    if (!(managementType === types_1.ManagementType.Install ||\n                        managementType === types_1.ManagementType.InstallDev)) return [3 /*break*/, 3];\n                    packageManager = util_1.useYarn() ? 'YARN' : 'NPM';\n                    return [4 /*yield*/, inquirer_1.default.prompt([\n                            {\n                                type: 'confirm',\n                                name: 'answer',\n                                message: \"[\" + packageManager + \"]: \\\"Do you want to install \" + dependency + \" \" + (managementType === types_1.ManagementType.InstallDev\n                                    ? 'as dev-dependency'\n                                    : '') + \"?\\\"\",\n                                default: false\n                            }\n                        ])];\n                case 2:\n                    inquired = (_c.sent());\n                    if (inquired.answer) {\n                        if (managementType === types_1.ManagementType.Install) {\n                            util_1.installNpmPackage(dependency);\n                        }\n                        else if (managementType === types_1.ManagementType.InstallDev) {\n                            util_1.installNpmDevPackage(dependency);\n                        }\n                        installedDeps.push(dependency);\n                    }\n                    _c.label = 3;\n                case 3: return [3 /*break*/, 9];\n                case 4:\n                    if (!(managementType === types_1.ManagementType.Update)) return [3 /*break*/, 8];\n                    latestVersion = util_1.getNpmLatestVersion(dependency);\n                    if (!util_1.semverLt(currentVersion, latestVersion)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, inquirer_1.default.prompt([\n                            {\n                                type: 'confirm',\n                                name: 'answer',\n                                message: \"[NPM]: \\\"\" + dependency + \"\\\" latest version is \" + latestVersion + \". Do you want to update?\",\n                                default: false\n                            }\n                        ])];\n                case 5:\n                    inquired = (_c.sent());\n                    if (inquired.answer) {\n                        log(\"Updating \" + dependency + \"...\");\n                        util_1.updateNpmPackage(dependency);\n                        updatedDeps.push(dependency);\n                    }\n                    return [3 /*break*/, 7];\n                case 6:\n                    log(\"\\\"\" + dependency + \"\\\" is up to date\");\n                    _c.label = 7;\n                case 7: return [3 /*break*/, 9];\n                case 8:\n                    log(\"\\\"\" + dependency + \"\\\" is already installed\");\n                    _c.label = 9;\n                case 9:\n                    _i++;\n                    return [3 /*break*/, 1];\n                case 10:\n                    result = new Map();\n                    result.set(types_1.ManagementType.Install, installedDeps);\n                    result.set(types_1.ManagementType.Update, updatedDeps);\n                    return [2 /*return*/, result];\n            }\n        });\n    });\n}\nvar dependencies = ['@tauri-apps/api', '@tauri-apps/cli'];\nfunction install() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.install = install;\nfunction installThese(dependencies) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Install, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.installThese = installThese;\nfunction installTheseDev(dependencies) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.InstallDev, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.installTheseDev = installTheseDev;\nfunction update() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, manageDependencies(types_1.ManagementType.Update, dependencies)];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nexports.update = update;\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.update = exports.install = void 0;\nvar types_1 = require(\"./types\");\nvar spawn_1 = require(\"../../helpers/spawn\");\nvar get_script_version_1 = __importDefault(require(\"../../helpers/get-script-version\"));\nvar logger_1 = __importDefault(require(\"../../helpers/logger\"));\nvar fs_1 = require(\"fs\");\nvar path_1 = require(\"path\");\nvar os_1 = require(\"os\");\nvar https_1 = __importDefault(require(\"https\"));\nvar log = logger_1.default('dependency:rust');\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction download(url, dest) {\n    return __awaiter(this, void 0, void 0, function () {\n        var file;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    file = fs_1.createWriteStream(dest);\n                    return [4 /*yield*/, new Promise(function (resolve, reject) {\n                            https_1.default\n                                .get(url, function (response) {\n                                response.pipe(file);\n                                file.on('finish', function () {\n                                    file.close();\n                                    resolve();\n                                });\n                            })\n                                .on('error', function (err) {\n                                fs_1.unlinkSync(dest);\n                                reject(err.message);\n                            });\n                        })];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction installRustup() {\n    if (os_1.platform() === 'win32') {\n        return spawn_1.spawnSync('powershell', [path_1.resolve(__dirname, '../../scripts/rustup-init.exe')], process.cwd());\n    }\n    return spawn_1.spawnSync('/bin/sh', [path_1.resolve(__dirname, '../../scripts/rustup-init.sh')], process.cwd());\n}\nfunction manageDependencies(managementType) {\n    if (get_script_version_1.default('rustup') === null) {\n        log('Installing rustup...');\n        installRustup();\n    }\n    if (managementType === types_1.ManagementType.Update) {\n        spawn_1.spawnSync('rustup', ['update'], process.cwd());\n    }\n}\nfunction install() {\n    return manageDependencies(types_1.ManagementType.Install);\n}\nexports.install = install;\nfunction update() {\n    return manageDependencies(types_1.ManagementType.Update);\n}\nexports.update = update;\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ManagementType = void 0;\nvar ManagementType;\n(function (ManagementType) {\n    ManagementType[ManagementType[\"Install\"] = 0] = \"Install\";\n    ManagementType[ManagementType[\"InstallDev\"] = 1] = \"InstallDev\";\n    ManagementType[ManagementType[\"Update\"] = 2] = \"Update\";\n})(ManagementType = exports.ManagementType || (exports.ManagementType = {}));\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.semverLt = exports.padVersion = exports.updateNpmPackage = exports.installNpmDevPackage = exports.installNpmPackage = exports.getNpmPackageVersion = exports.getNpmLatestVersion = exports.getCrateLatestVersion = exports.useYarn = void 0;\nvar spawn_1 = require(\"../../helpers/spawn\");\nvar cross_spawn_1 = require(\"cross-spawn\");\nvar app_paths_1 = require(\"../../helpers/app-paths\");\nvar fs_1 = require(\"fs\");\nvar semver_1 = __importDefault(require(\"semver\"));\nvar useYarn = function () {\n    return process.env.npm_execpath\n        ? process.env.npm_execpath.includes('yarn')\n        : fs_1.existsSync(app_paths_1.resolve.app('yarn.lock'));\n};\nexports.useYarn = useYarn;\nfunction getCrateLatestVersion(crateName) {\n    var child = cross_spawn_1.sync('cargo', ['search', crateName, '--limit', '1']);\n    var output = String(child.output[1]);\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    var matches = new RegExp(crateName + ' = \"(\\\\S+)\"', 'g').exec(output);\n    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\n        return matches[1];\n    }\n    else {\n        return null;\n    }\n}\nexports.getCrateLatestVersion = getCrateLatestVersion;\nfunction getNpmLatestVersion(packageName) {\n    if (useYarn()) {\n        var child = cross_spawn_1.sync('yarn', ['info', packageName, 'versions', '--json'], {\n            cwd: app_paths_1.appDir\n        });\n        var output = String(child.output[1]);\n        var packageJson = JSON.parse(output);\n        return packageJson.data[packageJson.data.length - 1];\n    }\n    else {\n        var child = cross_spawn_1.sync('npm', ['show', packageName, 'version'], {\n            cwd: app_paths_1.appDir\n        });\n        return String(child.output[1]).replace('\\n', '');\n    }\n}\nexports.getNpmLatestVersion = getNpmLatestVersion;\nfunction getNpmPackageVersion(packageName) {\n    var child = useYarn()\n        ? cross_spawn_1.sync('yarn', ['list', '--pattern', packageName, '--depth', '0'], {\n            cwd: app_paths_1.appDir\n        })\n        : cross_spawn_1.sync('npm', ['list', packageName, 'version', '--depth', '0'], {\n            cwd: app_paths_1.appDir\n        });\n    var output = String(child.output[1]);\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    var matches = new RegExp(packageName + '@(\\\\S+)', 'g').exec(output);\n    if (matches === null || matches === void 0 ? void 0 : matches[1]) {\n        return matches[1];\n    }\n    else {\n        return null;\n    }\n}\nexports.getNpmPackageVersion = getNpmPackageVersion;\nfunction installNpmPackage(packageName) {\n    if (useYarn()) {\n        spawn_1.spawnSync('yarn', ['add', packageName], app_paths_1.appDir);\n    }\n    else {\n        spawn_1.spawnSync('npm', ['install', packageName], app_paths_1.appDir);\n    }\n}\nexports.installNpmPackage = installNpmPackage;\nfunction installNpmDevPackage(packageName) {\n    if (useYarn()) {\n        spawn_1.spawnSync('yarn', ['add', packageName, '--dev'], app_paths_1.appDir);\n    }\n    else {\n        spawn_1.spawnSync('npm', ['install', packageName, '--save-dev'], app_paths_1.appDir);\n    }\n}\nexports.installNpmDevPackage = installNpmDevPackage;\nfunction updateNpmPackage(packageName) {\n    if (useYarn()) {\n        spawn_1.spawnSync('yarn', ['upgrade', packageName, '--latest'], app_paths_1.appDir);\n    }\n    else {\n        spawn_1.spawnSync('npm', ['install', packageName + \"@latest\"], app_paths_1.appDir);\n    }\n}\nexports.updateNpmPackage = updateNpmPackage;\nfunction padVersion(version) {\n    var _a;\n    var count = ((_a = version.match(/\\./g)) !== null && _a !== void 0 ? _a : []).length;\n    while (count < 2) {\n        count++;\n        version += '.0';\n    }\n    return version;\n}\nexports.padVersion = padVersion;\nfunction semverLt(first, second) {\n    return semver_1.default.lt(padVersion(first), padVersion(second));\n}\nexports.semverLt = semverLt;\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = exports.tauriDir = exports.appDir = void 0;\nvar fs_1 = require(\"fs\");\nvar path_1 = require(\"path\");\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar warn = logger_1.default('tauri', chalk_1.default.red);\nfunction resolvePath(basePath, dir) {\n    return dir && path_1.isAbsolute(dir) ? dir : path_1.resolve(basePath, dir);\n}\nvar getAppDir = function () {\n    var dir = process.cwd();\n    var count = 0;\n    // only go up three folders max\n    while (dir.length > 0 && !dir.endsWith(path_1.sep) && count <= 2) {\n        if (fs_1.existsSync(path_1.join(dir, 'src-tauri', 'tauri.conf.json'))) {\n            return dir;\n        }\n        count++;\n        dir = path_1.normalize(path_1.join(dir, '..'));\n    }\n    warn(\"Couldn't find recognize the current folder as a part of a Tauri project\");\n    process.exit(1);\n};\nvar appDir = getAppDir();\nexports.appDir = appDir;\nvar tauriDir = path_1.resolve(appDir, 'src-tauri');\nexports.tauriDir = tauriDir;\nvar resolveDir = {\n    app: function (dir) { return resolvePath(appDir, dir); },\n    tauri: function (dir) { return resolvePath(tauriDir, dir); }\n};\nexports.resolve = resolveDir;\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cross_spawn_1 = require(\"cross-spawn\");\nfunction getVersion(command, args) {\n    if (args === void 0) { args = []; }\n    try {\n        var child = cross_spawn_1.sync(command, __spreadArray(__spreadArray([], args), ['--version']));\n        if (child.status === 0) {\n            var output = String(child.output[1]);\n            return output.replace(/\\n/g, '');\n        }\n        return null;\n    }\n    catch (err) {\n        return null;\n    }\n}\nexports.default = getVersion;\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar ms_1 = __importDefault(require(\"ms\"));\nvar prevTime;\nexports.default = (function (banner, color) {\n    if (color === void 0) { color = chalk_1.default.green; }\n    return function (msg) {\n        var curr = +new Date();\n        var diff = curr - (prevTime || curr);\n        prevTime = curr;\n        if (msg) {\n            console.log(\n            // TODO: proper typings for color and banner\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions, @typescript-eslint/no-unsafe-call\n            \" \" + color(String(banner)) + \" \" + msg + \" \" + chalk_1.default.green(\"+\" + ms_1.default(diff)));\n        }\n        else {\n            console.log();\n        }\n    };\n});\n","\"use strict\";\n// Copyright 2019-2021 Tauri Programme within The Commons Conservancy\n// SPDX-License-Identifier: Apache-2.0\n// SPDX-License-Identifier: MIT\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.spawnSync = exports.spawn = void 0;\nvar cross_spawn_1 = __importDefault(require(\"cross-spawn\"));\nvar logger_1 = __importDefault(require(\"./logger\"));\nvar chalk_1 = __importDefault(require(\"chalk\"));\nvar log = logger_1.default('app:spawn');\nvar warn = logger_1.default('app:spawn', chalk_1.default.red);\n/*\n  Returns pid, takes onClose\n */\nvar spawn = function (cmd, params, cwd, onClose) {\n    log(\"Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\n    log();\n    // TODO: move to execa?\n    var runner = cross_spawn_1.default(cmd, params, {\n        stdio: 'inherit',\n        cwd: cwd,\n        env: process.env\n    });\n    runner.on('close', function (code) {\n        log();\n        if (code) {\n            // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n            log(\"Command \\\"\" + cmd + \"\\\" failed with exit code: \" + code);\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        onClose && onClose(code !== null && code !== void 0 ? code : 0, runner.pid);\n    });\n    return runner.pid;\n};\nexports.spawn = spawn;\n/*\n  Returns nothing, takes onFail\n */\nvar spawnSync = function (cmd, params, cwd, onFail) {\n    log(\"[sync] Running \\\"\" + cmd + \" \" + params.join(' ') + \"\\\"\");\n    log();\n    var runner = cross_spawn_1.default.sync(cmd, params, {\n        stdio: 'inherit',\n        cwd: cwd\n    });\n    // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n    if (runner.status || runner.error) {\n        warn();\n        // eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n        warn(\"\\u26A0\\uFE0F  Command \\\"\" + cmd + \"\\\" failed with exit code: \" + runner.status);\n        if (runner.status === null) {\n            warn(\"\\u26A0\\uFE0F  Please globally install \\\"\" + cmd + \"\\\"\");\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n        onFail && onFail();\n        process.exit(1);\n    }\n};\nexports.spawnSync = spawnSync;\n","module.exports = require(\"@tauri-apps/toml\");;","module.exports = require(\"chalk\");;","module.exports = require(\"cross-spawn\");;","module.exports = require(\"fs\");;","module.exports = require(\"https\");;","module.exports = require(\"inquirer\");;","module.exports = require(\"ms\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"semver\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(559);\n"],"sourceRoot":""}